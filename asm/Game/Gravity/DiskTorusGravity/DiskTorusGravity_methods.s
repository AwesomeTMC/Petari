.include "macros.inc"

.text

.global func_80158038
func_80158038:
/* 80158038 00153578  C0 02 BF 18 */	lfs f0, lbl_806A7198-_SDA2_BASE_(r2)
/* 8015803C 0015357C  FC 01 00 40 */	fcmpo cr0, f1, f0
/* 80158040 00153580  40 80 00 0C */	bge lbl_8015804C
/* 80158044 00153584  D0 03 00 60 */	stfs f0, 0x60(r3)
/* 80158048 00153588  4E 80 00 20 */	blr 
lbl_8015804C:
/* 8015804C 0015358C  D0 23 00 60 */	stfs f1, 0x60(r3)
/* 80158050 00153590  4E 80 00 20 */	blr 

.global func_80158054
func_80158054:
/* 80158054 00153594  90 83 00 64 */	stw r4, 0x64(r3)
/* 80158058 00153598  4E 80 00 20 */	blr 

.global func_8015805C
func_8015805C:
/* 8015805C 0015359C  98 83 00 68 */	stb r4, 0x68(r3)
/* 80158060 001535A0  4E 80 00 20 */	blr 
/* 80158064 001535A4  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80158068 001535A8  7C 08 02 A6 */	mflr r0
/* 8015806C 001535AC  90 01 00 24 */	stw r0, 0x24(r1)
/* 80158070 001535B0  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80158074 001535B4  7C 9F 23 78 */	mr r31, r4
/* 80158078 001535B8  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8015807C 001535BC  7C 7E 1B 78 */	mr r30, r3
/* 80158080 001535C0  7F E3 FB 78 */	mr r3, r31
/* 80158084 001535C4  38 9E 00 28 */	addi r4, r30, 0x28
/* 80158088 001535C8  38 BE 00 34 */	addi r5, r30, 0x34
/* 8015808C 001535CC  4B EB E5 61 */	bl func_800165EC
/* 80158090 001535D0  C0 1F 00 24 */	lfs f0, 0x24(r31)
/* 80158094 001535D4  38 7E 00 4C */	addi r3, r30, 0x4c
/* 80158098 001535D8  C0 3E 00 44 */	lfs f1, 0x44(r30)
/* 8015809C 001535DC  C0 5F 00 14 */	lfs f2, 0x14(r31)
/* 801580A0 001535E0  C0 9F 00 04 */	lfs f4, 4(r31)
/* 801580A4 001535E4  EC 01 00 32 */	fmuls f0, f1, f0
/* 801580A8 001535E8  C0 7F 00 20 */	lfs f3, 0x20(r31)
/* 801580AC 001535EC  EC 41 00 B2 */	fmuls f2, f1, f2
/* 801580B0 001535F0  C0 BE 00 40 */	lfs f5, 0x40(r30)
/* 801580B4 001535F4  EC 81 01 32 */	fmuls f4, f1, f4
/* 801580B8 001535F8  C0 DF 00 10 */	lfs f6, 0x10(r31)
/* 801580BC 001535FC  EC 25 00 F2 */	fmuls f1, f5, f3
/* 801580C0 00153600  C0 FF 00 00 */	lfs f7, 0(r31)
/* 801580C4 00153604  EC 65 01 B2 */	fmuls f3, f5, f6
/* 801580C8 00153608  C1 1F 00 28 */	lfs f8, 0x28(r31)
/* 801580CC 0015360C  EC A5 01 F2 */	fmuls f5, f5, f7
/* 801580D0 00153610  C0 FE 00 48 */	lfs f7, 0x48(r30)
/* 801580D4 00153614  C0 DF 00 08 */	lfs f6, 8(r31)
/* 801580D8 00153618  EC 43 10 2A */	fadds f2, f3, f2
/* 801580DC 0015361C  C1 3F 00 18 */	lfs f9, 0x18(r31)
/* 801580E0 00153620  EC A5 20 2A */	fadds f5, f5, f4
/* 801580E4 00153624  EC C7 01 B2 */	fmuls f6, f7, f6
/* 801580E8 00153628  EC 87 02 72 */	fmuls f4, f7, f9
/* 801580EC 0015362C  EC 01 00 2A */	fadds f0, f1, f0
/* 801580F0 00153630  EC 67 02 32 */	fmuls f3, f7, f8
/* 801580F4 00153634  EC 26 28 2A */	fadds f1, f6, f5
/* 801580F8 00153638  EC 44 10 2A */	fadds f2, f4, f2
/* 801580FC 0015363C  EC 63 00 2A */	fadds f3, f3, f0
/* 80158100 00153640  4B EB EE 81 */	bl func_80016F80
/* 80158104 00153644  38 9E 00 4C */	addi r4, r30, 0x4c
/* 80158108 00153648  38 61 00 08 */	addi r3, r1, 8
/* 8015810C 0015364C  7C 85 23 78 */	mr r5, r4
/* 80158110 00153650  48 28 CE B5 */	bl func_803E4FC4
/* 80158114 00153654  C0 3E 00 58 */	lfs f1, 0x58(r30)
/* 80158118 00153658  C0 01 00 08 */	lfs f0, 8(r1)
/* 8015811C 0015365C  EC 01 00 32 */	fmuls f0, f1, f0
/* 80158120 00153660  D0 1E 00 5C */	stfs f0, 0x5c(r30)
/* 80158124 00153664  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80158128 00153668  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8015812C 0015366C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80158130 00153670  7C 08 03 A6 */	mtlr r0
/* 80158134 00153674  38 21 00 20 */	addi r1, r1, 0x20
/* 80158138 00153678  4E 80 00 20 */	blr 
/* 8015813C 0015367C  94 21 FF 30 */	stwu r1, -0xd0(r1)
/* 80158140 00153680  7C 08 02 A6 */	mflr r0
/* 80158144 00153684  90 01 00 D4 */	stw r0, 0xd4(r1)
/* 80158148 00153688  DB E1 00 C0 */	stfd f31, 0xc0(r1)
/* 8015814C 0015368C  F3 E1 00 C8 */	psq_st f31, 200(r1), 0, 0
/* 80158150 00153690  DB C1 00 B0 */	stfd f30, 0xb0(r1)
/* 80158154 00153694  F3 C1 00 B8 */	psq_st f30, 184(r1), 0, 0
/* 80158158 00153698  DB A1 00 A0 */	stfd f29, 0xa0(r1)
/* 8015815C 0015369C  F3 A1 00 A8 */	psq_st f29, 168(r1), 0, 0
/* 80158160 001536A0  39 61 00 A0 */	addi r11, r1, 0xa0
/* 80158164 001536A4  48 3B F3 D1 */	bl func_80517534
/* 80158168 001536A8  7C 7C 1B 78 */	mr r28, r3
/* 8015816C 001536AC  7C DF 33 78 */	mr r31, r6
/* 80158170 001536B0  7C 9D 23 78 */	mr r29, r4
/* 80158174 001536B4  7C BE 2B 78 */	mr r30, r5
/* 80158178 001536B8  7F E4 FB 78 */	mr r4, r31
/* 8015817C 001536BC  38 61 00 40 */	addi r3, r1, 0x40
/* 80158180 001536C0  38 BC 00 34 */	addi r5, r28, 0x34
/* 80158184 001536C4  4B EC 0A 51 */	bl func_80018BD4
/* 80158188 001536C8  38 61 00 7C */	addi r3, r1, 0x7c
/* 8015818C 001536CC  38 81 00 40 */	addi r4, r1, 0x40
/* 80158190 001536D0  4B EC 09 85 */	bl func_80018B14
/* 80158194 001536D4  38 61 00 7C */	addi r3, r1, 0x7c
/* 80158198 001536D8  38 9C 00 4C */	addi r4, r28, 0x4c
/* 8015819C 001536DC  4B EC 4D A9 */	bl func_8001CF44
/* 801581A0 001536E0  88 1C 00 68 */	lbz r0, 0x68(r28)
/* 801581A4 001536E4  FF E0 08 90 */	fmr f31, f1
/* 801581A8 001536E8  2C 00 00 00 */	cmpwi r0, 0
/* 801581AC 001536EC  40 82 00 18 */	bne lbl_801581C4
/* 801581B0 001536F0  C0 02 BF 18 */	lfs f0, lbl_806A7198-_SDA2_BASE_(r2)
/* 801581B4 001536F4  FC 01 00 40 */	fcmpo cr0, f1, f0
/* 801581B8 001536F8  40 80 00 0C */	bge lbl_801581C4
/* 801581BC 001536FC  38 60 00 00 */	li r3, 0
/* 801581C0 00153700  48 00 01 EC */	b lbl_801583AC
lbl_801581C4:
/* 801581C4 00153704  38 61 00 34 */	addi r3, r1, 0x34
/* 801581C8 00153708  38 9C 00 4C */	addi r4, r28, 0x4c
/* 801581CC 0015370C  4B EC 09 C1 */	bl func_80018B8C
/* 801581D0 00153710  C0 41 00 34 */	lfs f2, 0x34(r1)
/* 801581D4 00153714  38 61 00 70 */	addi r3, r1, 0x70
/* 801581D8 00153718  C0 21 00 38 */	lfs f1, 0x38(r1)
/* 801581DC 0015371C  38 81 00 7C */	addi r4, r1, 0x7c
/* 801581E0 00153720  C0 01 00 3C */	lfs f0, 0x3c(r1)
/* 801581E4 00153724  EC 42 07 F2 */	fmuls f2, f2, f31
/* 801581E8 00153728  EC 21 07 F2 */	fmuls f1, f1, f31
/* 801581EC 0015372C  38 A1 00 34 */	addi r5, r1, 0x34
/* 801581F0 00153730  EC 00 07 F2 */	fmuls f0, f0, f31
/* 801581F4 00153734  D0 41 00 34 */	stfs f2, 0x34(r1)
/* 801581F8 00153738  D0 21 00 38 */	stfs f1, 0x38(r1)
/* 801581FC 0015373C  D0 01 00 3C */	stfs f0, 0x3c(r1)
/* 80158200 00153740  4B EC 09 D5 */	bl func_80018BD4
/* 80158204 00153744  38 81 00 70 */	addi r4, r1, 0x70
/* 80158208 00153748  38 61 00 0C */	addi r3, r1, 0xc
/* 8015820C 0015374C  7C 85 23 78 */	mr r5, r4
/* 80158210 00153750  48 28 CD B5 */	bl func_803E4FC4
/* 80158214 00153754  C0 21 00 0C */	lfs f1, 0xc(r1)
/* 80158218 00153758  C0 42 BF 24 */	lfs f2, lbl_806A71A4-_SDA2_BASE_(r2)
/* 8015821C 0015375C  48 28 D7 19 */	bl func_803E5934
/* 80158220 00153760  2C 03 00 00 */	cmpwi r3, 0
/* 80158224 00153764  41 82 00 10 */	beq lbl_80158234
/* 80158228 00153768  38 61 00 70 */	addi r3, r1, 0x70
/* 8015822C 0015376C  38 9C 00 4C */	addi r4, r28, 0x4c
/* 80158230 00153770  48 28 B1 C5 */	bl func_803E33F4
lbl_80158234:
/* 80158234 00153774  C3 BC 00 5C */	lfs f29, 0x5c(r28)
/* 80158238 00153778  38 61 00 64 */	addi r3, r1, 0x64
/* 8015823C 0015377C  C0 1C 00 60 */	lfs f0, 0x60(r28)
/* 80158240 00153780  38 80 00 00 */	li r4, 0
/* 80158244 00153784  38 A0 00 00 */	li r5, 0
/* 80158248 00153788  38 C0 00 00 */	li r6, 0
/* 8015824C 0015378C  EF DD 00 28 */	fsubs f30, f29, f0
/* 80158250 00153790  4B ED EF 89 */	bl func_800371D8
/* 80158254 00153794  C0 01 00 0C */	lfs f0, 0xc(r1)
/* 80158258 00153798  C0 22 BF 18 */	lfs f1, lbl_806A7198-_SDA2_BASE_(r2)
/* 8015825C 0015379C  FC 00 F0 40 */	fcmpo cr0, f0, f30
/* 80158260 001537A0  D0 21 00 08 */	stfs f1, 8(r1)
/* 80158264 001537A4  40 80 00 64 */	bge lbl_801582C8
/* 80158268 001537A8  80 1C 00 64 */	lwz r0, 0x64(r28)
/* 8015826C 001537AC  2C 00 00 00 */	cmpwi r0, 0
/* 80158270 001537B0  41 82 00 0C */	beq lbl_8015827C
/* 80158274 001537B4  2C 00 00 02 */	cmpwi r0, 2
/* 80158278 001537B8  40 82 00 0C */	bne lbl_80158284
lbl_8015827C:
/* 8015827C 001537BC  38 60 00 00 */	li r3, 0
/* 80158280 001537C0  48 00 01 2C */	b lbl_801583AC
lbl_80158284:
/* 80158284 001537C4  FC 20 F0 90 */	fmr f1, f30
/* 80158288 001537C8  38 61 00 70 */	addi r3, r1, 0x70
/* 8015828C 001537CC  38 9C 00 34 */	addi r4, r28, 0x34
/* 80158290 001537D0  38 A1 00 58 */	addi r5, r1, 0x58
/* 80158294 001537D4  48 2E 8C 65 */	bl func_80440EF8
/* 80158298 001537D8  7F E5 FB 78 */	mr r5, r31
/* 8015829C 001537DC  38 61 00 28 */	addi r3, r1, 0x28
/* 801582A0 001537E0  38 81 00 58 */	addi r4, r1, 0x58
/* 801582A4 001537E4  4B EC 09 31 */	bl func_80018BD4
/* 801582A8 001537E8  38 61 00 64 */	addi r3, r1, 0x64
/* 801582AC 001537EC  38 81 00 28 */	addi r4, r1, 0x28
/* 801582B0 001537F0  4B EC 08 65 */	bl func_80018B14
/* 801582B4 001537F4  38 81 00 64 */	addi r4, r1, 0x64
/* 801582B8 001537F8  38 61 00 08 */	addi r3, r1, 8
/* 801582BC 001537FC  7C 85 23 78 */	mr r5, r4
/* 801582C0 00153800  48 28 CD 05 */	bl func_803E4FC4
/* 801582C4 00153804  48 00 00 A4 */	b lbl_80158368
lbl_801582C8:
/* 801582C8 00153808  FC 00 E8 40 */	fcmpo cr0, f0, f29
/* 801582CC 0015380C  40 81 00 5C */	ble lbl_80158328
/* 801582D0 00153810  80 1C 00 64 */	lwz r0, 0x64(r28)
/* 801582D4 00153814  28 00 00 01 */	cmplwi r0, 1
/* 801582D8 00153818  41 81 00 0C */	bgt lbl_801582E4
/* 801582DC 0015381C  38 60 00 00 */	li r3, 0
/* 801582E0 00153820  48 00 00 CC */	b lbl_801583AC
lbl_801582E4:
/* 801582E4 00153824  FC 20 E8 90 */	fmr f1, f29
/* 801582E8 00153828  38 61 00 70 */	addi r3, r1, 0x70
/* 801582EC 0015382C  38 9C 00 34 */	addi r4, r28, 0x34
/* 801582F0 00153830  38 A1 00 4C */	addi r5, r1, 0x4c
/* 801582F4 00153834  48 2E 8C 05 */	bl func_80440EF8
/* 801582F8 00153838  7F E5 FB 78 */	mr r5, r31
/* 801582FC 0015383C  38 61 00 1C */	addi r3, r1, 0x1c
/* 80158300 00153840  38 81 00 4C */	addi r4, r1, 0x4c
/* 80158304 00153844  4B EC 08 D1 */	bl func_80018BD4
/* 80158308 00153848  38 61 00 64 */	addi r3, r1, 0x64
/* 8015830C 0015384C  38 81 00 1C */	addi r4, r1, 0x1c
/* 80158310 00153850  4B EC 08 05 */	bl func_80018B14
/* 80158314 00153854  38 81 00 64 */	addi r4, r1, 0x64
/* 80158318 00153858  38 61 00 08 */	addi r3, r1, 8
/* 8015831C 0015385C  7C 85 23 78 */	mr r5, r4
/* 80158320 00153860  48 28 CC A5 */	bl func_803E4FC4
/* 80158324 00153864  48 00 00 44 */	b lbl_80158368
lbl_80158328:
/* 80158328 00153868  FC 1F 08 40 */	fcmpo cr0, f31, f1
/* 8015832C 0015386C  4C 41 13 82 */	cror 2, 1, 2
/* 80158330 00153870  40 82 00 24 */	bne lbl_80158354
/* 80158334 00153874  E0 1C 00 4C */	psq_l f0, 76(r28), 0, 0
/* 80158338 00153878  38 81 00 10 */	addi r4, r1, 0x10
/* 8015833C 0015387C  10 00 00 50 */	ps_neg f0, f0
/* 80158340 00153880  F0 04 00 00 */	psq_st f0, 0(r4), 0, 0
/* 80158344 00153884  C0 1C 00 54 */	lfs f0, 0x54(r28)
/* 80158348 00153888  FC 00 00 50 */	fneg f0, f0
/* 8015834C 0015388C  D0 01 00 18 */	stfs f0, 0x18(r1)
/* 80158350 00153890  48 00 00 08 */	b lbl_80158358
lbl_80158354:
/* 80158354 00153894  38 9C 00 4C */	addi r4, r28, 0x4c
lbl_80158358:
/* 80158358 00153898  38 61 00 64 */	addi r3, r1, 0x64
/* 8015835C 0015389C  4B EC 07 B9 */	bl func_80018B14
/* 80158360 001538A0  FC 00 FA 10 */	fabs f0, f31
/* 80158364 001538A4  D0 01 00 08 */	stfs f0, 8(r1)
lbl_80158368:
/* 80158368 001538A8  C0 21 00 08 */	lfs f1, 8(r1)
/* 8015836C 001538AC  7F 83 E3 78 */	mr r3, r28
/* 80158370 001538B0  48 00 20 C9 */	bl func_8015A438
/* 80158374 001538B4  2C 03 00 00 */	cmpwi r3, 0
/* 80158378 001538B8  40 82 00 0C */	bne lbl_80158384
/* 8015837C 001538BC  38 60 00 00 */	li r3, 0
/* 80158380 001538C0  48 00 00 2C */	b lbl_801583AC
lbl_80158384:
/* 80158384 001538C4  2C 1D 00 00 */	cmpwi r29, 0
/* 80158388 001538C8  41 82 00 10 */	beq lbl_80158398
/* 8015838C 001538CC  7F A3 EB 78 */	mr r3, r29
/* 80158390 001538D0  38 81 00 64 */	addi r4, r1, 0x64
/* 80158394 001538D4  4B EC 07 81 */	bl func_80018B14
lbl_80158398:
/* 80158398 001538D8  2C 1E 00 00 */	cmpwi r30, 0
/* 8015839C 001538DC  41 82 00 0C */	beq lbl_801583A8
/* 801583A0 001538E0  C0 01 00 08 */	lfs f0, 8(r1)
/* 801583A4 001538E4  D0 1E 00 00 */	stfs f0, 0(r30)
lbl_801583A8:
/* 801583A8 001538E8  38 60 00 01 */	li r3, 1
lbl_801583AC:
/* 801583AC 001538EC  E3 E1 00 C8 */	psq_l f31, 200(r1), 0, 0
/* 801583B0 001538F0  CB E1 00 C0 */	lfd f31, 0xc0(r1)
/* 801583B4 001538F4  E3 C1 00 B8 */	psq_l f30, 184(r1), 0, 0
/* 801583B8 001538F8  CB C1 00 B0 */	lfd f30, 0xb0(r1)
/* 801583BC 001538FC  E3 A1 00 A8 */	psq_l f29, 168(r1), 0, 0
/* 801583C0 00153900  39 61 00 A0 */	addi r11, r1, 0xa0
/* 801583C4 00153904  CB A1 00 A0 */	lfd f29, 0xa0(r1)
/* 801583C8 00153908  48 3B F1 B9 */	bl func_80517580
/* 801583CC 0015390C  80 01 00 D4 */	lwz r0, 0xd4(r1)
/* 801583D0 00153910  7C 08 03 A6 */	mtlr r0
/* 801583D4 00153914  38 21 00 D0 */	addi r1, r1, 0xd0
/* 801583D8 00153918  4E 80 00 20 */	blr 

